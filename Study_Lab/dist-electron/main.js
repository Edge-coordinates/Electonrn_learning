"use strict";const t=require("electron"),c=require("path");function p(n){const i=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(n){for(const e in n)if(e!=="default"){const l=Object.getOwnPropertyDescriptor(n,e);Object.defineProperty(i,e,l.get?l:{enumerable:!0,get:()=>n[e]})}}return i.default=n,Object.freeze(i)}const o=p(c),s=process.env.NODE_ENV;function u(){const n=new t.BrowserWindow({minWidth:1120,minHeight:645,width:1120,height:645,transparent:!0,hasShadow:!1,show:!1,resizable:!1,webPreferences:{nodeIntegration:!0,webSecurity:!1,preload:o.join(__dirname,"./preload.js")}});n.once("ready-to-show",()=>{n.show()}),s==="development"&&n.loadFile(o.join(__dirname,"..","dist/index.html")),s!=="development"&&n.loadFile(o.join(__dirname,"..","dist/index.html"))}function d(){return t.BrowserWindow.getFocusedWindow()}function b(){var n;(n=d())==null||n.webContents.openDevTools()}function m(){t.ipcMain.handle("getAppMenu",()=>process.platform=="darwin"?null:M()),t.ipcMain.on("MenuClick",(n,i)=>{var l;const e=(l=t.Menu.getApplicationMenu())==null?void 0:l.getMenuItemById(i);e==null||e.click()})}function f(){const n=[{id:"1",label:"App",submenu:[{id:"1-1",label:"测试"}]},{id:"2",label:"开发",submenu:[{id:"2-1",label:"测试",submenu:[{id:"2-1-1",label:"测试-1",submenu:[{id:"2-1-4-1",label:"测试-1-1"},{id:"2-1-4-1",label:"测试-1-2"}]},{id:"2-1-2",label:"测试-2"},{id:"2-1-3",label:"测试-3"},{id:"2-1-4",label:"测试-4",submenu:[{id:"2-1-4-1",label:"测试-4-1"},{id:"2-1-4-1",label:"测试-4-2"}]}]},{id:"2-2",label:"检查元素",click(){b()}}]}];return t.Menu.buildFromTemplate(n)}function M(){function n(e){let l=[];return e.map(a=>{let r={lable:a.label,id:a.id,type:a.type,child:a.type=="submenu"&&a.submenu?n(a.submenu.items):null};l.push(r)}),l}const i=t.Menu.getApplicationMenu();return n(i.items)}function g(){t.ipcMain.on("navBar",(n,i)=>{const e=t.BrowserWindow.fromWebContents(n.sender);i=="mini"&&(e==null||e.minimize()),i=="close"&&(e==null||e.close()),i=="big"&&(e==null||e.setResizable(!0),e!=null&&e.isMaximized()?e==null||e.unmaximize():e==null||e.maximize(),e==null||e.setResizable(!1))})}g();m();t.app.on("ready",()=>{t.Menu.setApplicationMenu(f()),u(),t.app.on("activate",()=>t.BrowserWindow.getAllWindows().length===0&&u())});t.app.on("window-all-closed",()=>{process.platform!=="darwin"&&t.app.quit()});
